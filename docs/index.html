
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IRAVListo — Calculadora IRAV + Notificación PDF/Word</title>
  <meta name="description" content="Calculadora IRAV gratis. Genera notificación formal en PDF/Word en 2 minutos para la actualización anual del alquiler." />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="container">
    <div class="nav">
      <div class="brand">
        <span style="display:inline-flex;width:34px;height:34px;border-radius:12px;background:var(--primary);align-items:center;justify-content:center;color:#fff;font-weight:900;">IR</span>
        <span>IRAVListo</span>
        <span class="badge">Cálculo gratis · Documento en PDF/Word</span>
      </div>
      <div class="nav-cta">
        <a class="btn small" href="#pricing">Precios</a>
        <a class="btn primary small" href="#calc">Calcular gratis</a>
      </div>
    </div>

    <div class="hero">
      <div class="hero-card">
        <h1 class="h1">Calculadora IRAV gratis + notificación lista en PDF/Word</h1>
        <p class="sub">Calcula la <strong>subida máxima del alquiler</strong> con el IRAV (INE) y genera una comunicación formal en 2 minutos. Sin registro.</p>
        <ul class="bullets">
          <li>Cálculo con datos oficiales (IRAV mensual) cuando el archivo local está actualizado.</li>
          <li>Documento listo para enviar: renta anterior, % aplicado, renta nueva y fecha de efecto.</li>
          <li>Checklist anti-errores: cláusula, fechas, preaviso y evidencias recomendadas.</li>
        </ul>
        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:16px">
          <a class="btn primary" href="#calc">Calcular gratis</a>
          <button class="btn" id="btnExample" type="button">Ver ejemplo (texto)</button>
        </div>
        <div class="kicker">
          <span>Sin registro</span>
          <span>Exporta PDF/Word</span>
          <span>Aviso: no es asesoramiento jurídico</span>
        </div>
      </div>

      <div class="hero-card">
        <h2 style="margin:0 0 10px; color:var(--primary)">Qué consigues</h2>
        <div class="result">
          <div class="row"><span>IRAV aplicado</span><strong id="outIrav">—</strong></div>
          <div class="row"><span>Renta anterior</span><strong id="outOld">—</strong></div>
          <div class="row"><span>Renta actualizada</span><strong id="outNew">—</strong></div>
          <div class="row"><span>Diferencia</span><strong id="outDelta">—</strong></div>
          <div class="row"><span>Periodo IRAV</span><strong id="outMonth">—</strong></div>
        </div>

        <div class="hr"></div>

        <div id="status" class="notice">—</div>

        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px">
          <button class="btn primary" id="btnPdf" type="button">Descargar PDF</button>
          <button class="btn" id="btnDocx" type="button">Descargar Word</button>
        </div>

        <p class="mini" style="margin-top:10px">
          Para desbloquear la descarga, tras el pago introduce tu código de acceso (MVP). En versión Pro/Agencia, se puede automatizar con verificación.
        </p>
      </div>
    </div>

    <div class="section">
      <div class="grid3">
        <div class="card">
          <h3>Propietarios</h3>
          <p>Calcula el límite y comunica la actualización con un documento claro y consistente.</p>
        </div>
        <div class="card">
          <h3>Agencias / administradores</h3>
          <p>Estandariza el proceso y genera notificaciones homogéneas para múltiples inmuebles.</p>
        </div>
        <div class="card">
          <h3>Inquilinos</h3>
          <p>Comprueba si la subida propuesta respeta el tope y guarda el cálculo en un documento.</p>
        </div>
      </div>
    </div>

    <div class="section" id="calc">
      <div class="split">
        <div class="card">
          <h2>Calcula ahora</h2>
          <p class="lead">Introduce los datos mínimos. El cálculo es gratuito. La descarga de documento (PDF/Word) es de pago, salvo Pro.</p>

          <form class="form" id="calcForm">
            <div class="field">
              <label for="rent">Renta mensual actual (€)</label>
              <input id="rent" name="rent" inputmode="decimal" placeholder="Ej. 950" required />
            </div>

            <div class="field">
              <label for="period">Mes IRAV a aplicar</label>
              <select id="period" name="period"></select>
            </div>

            <div class="field full" style="margin-top:2px">
              <label>
                <input type="checkbox" id="manualIravToggle" />
                Introducir IRAV manualmente (si no hay dato para el mes seleccionado)
              </label>
            </div>

            <div class="field">
              <label for="manualIrav">IRAV manual (%)</label>
              <input id="manualIrav" name="manualIrav" inputmode="decimal" placeholder="Ej. 2,29" />
            </div>

            <div class="field">
              <label for="effectiveDate">Fecha de efecto (opcional)</label>
              <input id="effectiveDate" name="effectiveDate" type="date" />
            </div>

            <div class="field">
              <label for="contractDate">Fecha de contrato (opcional)</label>
              <input id="contractDate" name="contractDate" type="date" />
            </div>

            <div class="field">
              <label for="tenantName">Nombre arrendatario (opcional)</label>
              <input id="tenantName" name="tenantName" placeholder="Ej. Ana Pérez" />
            </div>

            <div class="field">
              <label for="landlordName">Nombre arrendador (opcional)</label>
              <input id="landlordName" name="landlordName" placeholder="Ej. Juan García" />
            </div>

            <div class="field full">
              <label for="address">Dirección del inmueble (opcional)</label>
              <input id="address" name="address" placeholder="Ej. C/ Example 12, Barcelona" />
            </div>

            <div class="field full">
              <label for="extra">Observaciones (opcional)</label>
              <textarea id="extra" name="extra" placeholder="Ej. Forma de pago, recordatorio de cuenta, etc."></textarea>
            </div>

            <div class="field full" style="margin-top:4px">
              <button class="btn primary" type="submit">Calcular gratis</button>
              <p class="mini" style="margin:10px 0 0">
                Aviso: herramienta informativa basada en fuentes públicas (INE/MIVAU/BOE). No constituye asesoramiento jurídico.
              </p>
            </div>
          </form>
        </div>

        <div class="card">
          <h2>Qué se desbloquea con la descarga</h2>
          <p class="lead">Lo que el usuario realmente necesita es ejecutar el proceso: cálculo + documento + checklist.</p>
          <ul class="bullets">
            <li><strong>Notificación formal</strong> lista para enviar (PDF/Word).</li>
            <li><strong>Resumen del cálculo</strong> incluido en el documento (trazabilidad).</li>
            <li><strong>Checklist</strong> anti-errores (fechas, cláusula, evidencias).</li>
          </ul>
          <div class="hr"></div>
          <div class="notice">
            Recomendación de conversión: mantén el cálculo gratuito y cobra solo por exportar el documento.
          </div>
          <p class="mini" style="margin-top:10px">
            Nota técnica: la app funciona 100% en el navegador. No necesitas almacenar datos personales para el MVP.
          </p>
        </div>
      </div>
    </div>

    <div class="section" id="pricing">
      <h2>Precios</h2>
      <p class="lead">Estrategia de captación: cálculo gratis. Pago solo en el momento de valor (documento).</p>

      <div class="pricing">
        <div class="price">
          <div class="name">Gratis</div>
          <div class="amt">0 €</div>
          <p class="meta">Para calcular el tope IRAV</p>
          <ul>
            <li>Cálculo en pantalla</li>
            <li>Sin registro</li>
            <li>Entrada SEO (calculadora IRAV)</li>
          </ul>
          <div class="cta"><a class="btn primary" href="#calc">Calcular gratis</a></div>
        </div>

        <div class="price">
          <div class="name">Pago por uso</div>
          <div class="amt">9 €</div>
          <p class="meta">1 documento (PDF + Word)</p>
          <ul>
            <li>Notificación formal exportable</li>
            <li>Resumen del cálculo dentro del documento</li>
            <li>Checklist anti-errores</li>
          </ul>
          <div class="cta"><button class="btn primary" type="button" onclick="document.getElementById('buyBtn').click()">Comprar</button></div>
        </div>

        <div class="price">
          <div class="name">Pro (12 meses)</div>
          <div class="amt">49 €</div>
          <p class="meta">Ilimitado (ideal para propietarios con varias revisiones)</p>
          <ul>
            <li>Descargas ilimitadas</li>
            <li>Histórico (local)</li>
            <li>Plantillas ampliadas (opcional)</li>
          </ul>
          <div class="cta"><a class="btn" href="#calc">Ver en calculadora</a></div>
        </div>
      </div>

      <p class="mini" style="margin-top:12px">
        Agencia (149 €/año) y automatización completa de cobro/licencias disponible en la versión siguiente.
      </p>
    </div>

    <div class="section">
      <h2>FAQ</h2>
      <div class="split">
        <div class="card">
          <h3>¿Es asesoramiento legal?</h3>
          <p>No. Es una herramienta de cálculo y generación documental basada en fuentes públicas. Para casos complejos, consulta a un profesional.</p>
          <div class="hr"></div>
          <h3>¿Qué pasa si falta el dato del mes?</h3>
          <p>Activa el modo manual e introduce el porcentaje del IRAV. Para producción, se mantiene actualizado el archivo <code>irav_data.json</code> (ver README).</p>
        </div>
        <div class="card">
          <h3>¿Guardáis mis datos?</h3>
          <p>En el MVP puedes usarlo sin crear cuenta. Los datos se quedan en tu navegador, salvo que actives un modo Pro con histórico.</p>
          <div class="hr"></div>
          <h3>¿Cómo se desbloquea la descarga?</h3>
          <p>Modo MVP: compras y recibes un código de desbloqueo. Modo automático: Stripe + verificación en servidor (incluida en la carpeta <code>advanced</code>).</p>
        </div>
      </div>
    </div>

    <div class="footer">
      <div class="hr"></div>
      <p><strong>Aviso:</strong> IRAVListo es una herramienta informativa de cálculo y generación documental basada en fuentes públicas (INE/MIVAU/BOE). No constituye asesoramiento jurídico. El usuario debe verificar la cláusula de actualización del contrato y la normativa aplicable a su caso.</p>
      <p>Soporte: <a href="#" onclick="alert('Configura CONFIG.SUPPORT_EMAIL en app.js'); return false;">contacto</a></p>
    </div>
  </div>

  <!-- Sticky CTA for mobile -->
  <div class="sticky">
    <div class="inner">
      <div class="txt">Calcula gratis en 30 segundos.</div>
      <button class="btn primary" id="stickyCalc" type="button">Calcular</button>
    </div>
  </div>

  <!-- Paywall modal -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="box" role="dialog" aria-modal="true">
      <button class="close" id="closeModal" aria-label="Cerrar">✕</button>
      <h3>Desbloquear descargas</h3>
      <p>La descarga del documento (PDF/Word) es una funcionalidad de pago. Compra y pega tu código para desbloquear.</p>
      <div class="actions">
        <button class="btn primary" id="buyBtn" type="button">Comprar (9 €)</button>
        <button class="btn" id="unlockBtn" type="button">Desbloquear</button>
      </div>
      <div class="codeRow">
        <input id="unlockCode" placeholder="Ej. IRAV-AB12-CD34-EF56" />
      </div>
      <div id="unlockMsg" class="mini" style="margin-top:10px"></div>
      <p class="mini" style="margin-top:10px">Para automatización completa: ver carpeta <code>advanced</code> (Stripe + verificación).</p>
    </div>
  </div>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docx@8.5.0/build/index.umd.js"></script>

  <!-- App (PRO_MODE injected) -->
  <script>window.__PRO_MODE__ = false;</script>
  <script src="./app.js"></script>
</body>
</html>
